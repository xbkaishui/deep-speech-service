from speech_service.service.service_util import *
from loguru import logger


def test_parse_timeline():
    ars_result = {'status': 'ok', 'signal': 'finished',
                  'result': '你们觉得有没有国家敢跟老美对着干呢？当然有，但是朝鲜一定是最特殊的那一个。朝鲜有多特殊呢？聚过朝鲜的人都知道，他们国内的经济并不发达，无论是建筑，交通，服装等等都可以看得出来，朝鲜其实还是比较落后的，但是就是这么一个小国，竟然敢公然和老美交板，朝鲜有多神奇呢？作为世界老大的老美，明明鹤的雅痒痒的，但是拿它一点办法都没有，你看老美要求朝鲜放弃和武器，朝鲜不仅没有放弃，反而是买头，加速研发和武器，老美气的是多。',
                  'times': [{'w': '你', 'bg': 0.0, 'ed': 0.68},
                            {'w': '们', 'bg': 0.68, 'ed': 0.8},
                            {'w': '觉', 'bg': 0.8, 'ed': 0.9400000000000001},
                            {'w': '得', 'bg': 0.9400000000000001, 'ed': 1.1400000000000001},
                            {'w': '有', 'bg': 1.1400000000000001, 'ed': 1.34},
                            {'w': '没', 'bg': 1.34, 'ed': 1.44},
                            {'w': '有', 'bg': 1.44, 'ed': 1.58},
                            {'w': '国', 'bg': 1.58, 'ed': 1.78},
                            {'w': '家', 'bg': 1.78, 'ed': 2.04},
                            {'w': '敢', 'bg': 2.04, 'ed': 2.2800000000000002},
                            {'w': '跟', 'bg': 2.2800000000000002, 'ed': 2.5},
                            {'w': '老', 'bg': 2.5, 'ed': 2.7600000000000002},
                            {'w': '美', 'bg': 2.7600000000000002, 'ed': 3.04},
                            {'w': '对', 'bg': 3.04, 'ed': 3.2600000000000002},
                            {'w': '着', 'bg': 3.2600000000000002, 'ed': 3.38}, {'w': '干', 'bg': 3.38, 'ed': 3.52},
                            {'w': '呢', 'bg': 3.52, 'ed': 3.7600000000000002},
                            {'w': '当', 'bg': 3.7600000000000002, 'ed': 4.0200000000000005},
                            {'w': '然', 'bg': 4.0200000000000005, 'ed': 4.2}, {'w': '有', 'bg': 4.2, 'ed': 4.46},
                            {'w': '但', 'bg': 4.46, 'ed': 4.72}, {'w': '是', 'bg': 4.72, 'ed': 5.0200000000000005},
                            {'w': '朝', 'bg': 5.0200000000000005, 'ed': 5.34}, {'w': '鲜', 'bg': 5.34, 'ed': 5.54},
                            {'w': '一', 'bg': 5.54, 'ed': 5.72}, {'w': '定', 'bg': 5.72, 'ed': 5.9},
                            {'w': '是', 'bg': 5.9, 'ed': 6.22}, {'w': '最', 'bg': 6.22, 'ed': 6.5600000000000005},
                            {'w': '特', 'bg': 6.5600000000000005, 'ed': 6.8}, {'w': '殊', 'bg': 6.8, 'ed': 6.98},
                            {'w': '的', 'bg': 6.98, 'ed': 7.12}, {'w': '那', 'bg': 7.12, 'ed': 7.24},
                            {'w': '一', 'bg': 7.24, 'ed': 7.34}, {'w': '个', 'bg': 7.34, 'ed': 7.78},
                            {'w': '朝', 'bg': 7.78, 'ed': 8.24}, {'w': '鲜', 'bg': 8.24, 'ed': 8.36},
                            {'w': '有', 'bg': 8.36, 'ed': 8.48}, {'w': '多', 'bg': 8.48, 'ed': 8.66},
                            {'w': '特', 'bg': 8.66, 'ed': 8.84}, {'w': '殊', 'bg': 8.84, 'ed': 8.98},
                            {'w': '呢', 'bg': 8.98, 'ed': 9.24}, {'w': '聚', 'bg': 9.24, 'ed': 9.52},
                            {'w': '过', 'bg': 9.52, 'ed': 9.66}, {'w': '朝', 'bg': 9.66, 'ed': 9.82},
                            {'w': '鲜', 'bg': 9.82, 'ed': 9.98}, {'w': '的', 'bg': 9.98, 'ed': 10.1},
                            {'w': '人', 'bg': 10.1, 'ed': 10.28}, {'w': '都', 'bg': 10.28, 'ed': 10.5},
                            {'w': '知', 'bg': 10.5, 'ed': 10.66}, {'w': '道', 'bg': 10.66, 'ed': 10.9},
                            {'w': '他', 'bg': 10.9, 'ed': 11.120000000000001},
                            {'w': '们', 'bg': 11.120000000000001, 'ed': 11.24}, {'w': '国', 'bg': 11.24, 'ed': 11.4},
                            {'w': '内', 'bg': 11.4, 'ed': 11.540000000000001},
                            {'w': '的', 'bg': 11.540000000000001, 'ed': 11.66}, {'w': '经', 'bg': 11.66, 'ed': 11.82},
                            {'w': '济', 'bg': 11.82, 'ed': 12.040000000000001},
                            {'w': '并', 'bg': 12.040000000000001, 'ed': 12.24}, {'w': '不', 'bg': 12.24, 'ed': 12.4},
                            {'w': '发', 'bg': 12.4, 'ed': 12.56}, {'w': '达', 'bg': 12.56, 'ed': 12.86},
                            {'w': '无', 'bg': 12.86, 'ed': 13.16}, {'w': '论', 'bg': 13.16, 'ed': 13.32},
                            {'w': '是', 'bg': 13.32, 'ed': 13.540000000000001},
                            {'w': '建', 'bg': 13.540000000000001, 'ed': 13.82}, {'w': '筑', 'bg': 13.82, 'ed': 14.1},
                            {'w': '交', 'bg': 14.1, 'ed': 14.34}, {'w': '通', 'bg': 14.34, 'ed': 14.58},
                            {'w': '服', 'bg': 14.58, 'ed': 14.84}, {'w': '装', 'bg': 14.84, 'ed': 15.06},
                            {'w': '等', 'bg': 15.06, 'ed': 15.26}, {'w': '等', 'bg': 15.26, 'ed': 15.52},
                            {'w': '都', 'bg': 15.52, 'ed': 15.76}, {'w': '可', 'bg': 15.76, 'ed': 15.88},
                            {'w': '以', 'bg': 15.88, 'ed': 15.98}, {'w': '看', 'bg': 15.98, 'ed': 16.1},
                            {'w': '得', 'bg': 16.1, 'ed': 16.22}, {'w': '出', 'bg': 16.22, 'ed': 16.34},
                            {'w': '来', 'bg': 16.34, 'ed': 16.7}, {'w': '朝', 'bg': 16.7, 'ed': 17.080000000000002},
                            {'w': '鲜', 'bg': 17.080000000000002, 'ed': 17.32}, {'w': '其', 'bg': 17.32, 'ed': 17.54},
                            {'w': '实', 'bg': 17.54, 'ed': 17.64}, {'w': '还', 'bg': 17.64, 'ed': 17.76},
                            {'w': '是', 'bg': 17.76, 'ed': 17.92}, {'w': '比', 'bg': 17.92, 'ed': 18.06},
                            {'w': '较', 'bg': 18.06, 'ed': 18.22}, {'w': '落', 'bg': 18.22, 'ed': 18.400000000000002},
                            {'w': '后', 'bg': 18.400000000000002, 'ed': 18.56}, {'w': '的', 'bg': 18.56, 'ed': 18.84},
                            {'w': '但', 'bg': 18.84, 'ed': 19.12}, {'w': '是', 'bg': 19.12, 'ed': 19.400000000000002},
                            {'w': '就', 'bg': 19.400000000000002, 'ed': 19.72},
                            {'w': '是', 'bg': 19.72, 'ed': 19.900000000000002},
                            {'w': '这', 'bg': 19.900000000000002, 'ed': 20.02}, {'w': '么', 'bg': 20.02, 'ed': 20.12},
                            {'w': '一', 'bg': 20.12, 'ed': 20.22}, {'w': '个', 'bg': 20.22, 'ed': 20.400000000000002},
                            {'w': '小', 'bg': 20.400000000000002, 'ed': 20.64}, {'w': '国', 'bg': 20.64, 'ed': 21.0},
                            {'w': '竟', 'bg': 21.0, 'ed': 21.3}, {'w': '然', 'bg': 21.3, 'ed': 21.44},
                            {'w': '敢', 'bg': 21.44, 'ed': 21.740000000000002},
                            {'w': '公', 'bg': 21.740000000000002, 'ed': 22.080000000000002},
                            {'w': '然', 'bg': 22.080000000000002, 'ed': 22.34}, {'w': '和', 'bg': 22.34, 'ed': 22.6},
                            {'w': '老', 'bg': 22.6, 'ed': 22.86}, {'w': '美', 'bg': 22.86, 'ed': 23.1},
                            {'w': '交', 'bg': 23.1, 'ed': 23.28}, {'w': '板', 'bg': 23.28, 'ed': 23.8},
                            {'w': '朝', 'bg': 23.8, 'ed': 24.32}, {'w': '鲜', 'bg': 24.32, 'ed': 24.44},
                            {'w': '有', 'bg': 24.44, 'ed': 24.54}, {'w': '多', 'bg': 24.54, 'ed': 24.68},
                            {'w': '神', 'bg': 24.68, 'ed': 24.86}, {'w': '奇', 'bg': 24.86, 'ed': 25.02},
                            {'w': '呢', 'bg': 25.02, 'ed': 25.240000000000002},
                            {'w': '作', 'bg': 25.240000000000002, 'ed': 25.46}, {'w': '为', 'bg': 25.46, 'ed': 25.62},
                            {'w': '世', 'bg': 25.62, 'ed': 25.78}, {'w': '界', 'bg': 25.78, 'ed': 25.92},
                            {'w': '老', 'bg': 25.92, 'ed': 26.060000000000002},
                            {'w': '大', 'bg': 26.060000000000002, 'ed': 26.18}, {'w': '的', 'bg': 26.18, 'ed': 26.3},
                            {'w': '老', 'bg': 26.3, 'ed': 26.44}, {'w': '美', 'bg': 26.44, 'ed': 26.76},
                            {'w': '明', 'bg': 26.76, 'ed': 27.1}, {'w': '明', 'bg': 27.1, 'ed': 27.32},
                            {'w': '鹤', 'bg': 27.32, 'ed': 27.5}, {'w': '的', 'bg': 27.5, 'ed': 27.62},
                            {'w': '雅', 'bg': 27.62, 'ed': 27.78}, {'w': '痒', 'bg': 27.78, 'ed': 27.96},
                            {'w': '痒', 'bg': 27.96, 'ed': 28.14}, {'w': '的', 'bg': 28.14, 'ed': 28.34},
                            {'w': '但', 'bg': 28.34, 'ed': 28.52}, {'w': '是', 'bg': 28.52, 'ed': 28.66},
                            {'w': '拿', 'bg': 28.66, 'ed': 28.8}, {'w': '它', 'bg': 28.8, 'ed': 29.0},
                            {'w': '一', 'bg': 29.0, 'ed': 29.240000000000002},
                            {'w': '点', 'bg': 29.240000000000002, 'ed': 29.52}, {'w': '办', 'bg': 29.52, 'ed': 29.78},
                            {'w': '法', 'bg': 29.78, 'ed': 29.96}, {'w': '都', 'bg': 29.96, 'ed': 30.12},
                            {'w': '没', 'bg': 30.12, 'ed': 30.28}, {'w': '有', 'bg': 30.28, 'ed': 30.62},
                            {'w': '你', 'bg': 30.62, 'ed': 30.94}, {'w': '看', 'bg': 30.94, 'ed': 31.2},
                            {'w': '老', 'bg': 31.2, 'ed': 31.48}, {'w': '美', 'bg': 31.48, 'ed': 31.64},
                            {'w': '要', 'bg': 31.64, 'ed': 31.78}, {'w': '求', 'bg': 31.78, 'ed': 31.98},
                            {'w': '朝', 'bg': 31.98, 'ed': 32.24}, {'w': '鲜', 'bg': 32.24, 'ed': 32.52},
                            {'w': '放', 'bg': 32.52, 'ed': 32.78}, {'w': '弃', 'bg': 32.78, 'ed': 32.980000000000004},
                            {'w': '和', 'bg': 32.980000000000004, 'ed': 33.160000000000004},
                            {'w': '武', 'bg': 33.160000000000004, 'ed': 33.32}, {'w': '器', 'bg': 33.32, 'ed': 33.64},
                            {'w': '朝', 'bg': 33.64, 'ed': 33.980000000000004},
                            {'w': '鲜', 'bg': 33.980000000000004, 'ed': 34.24}, {'w': '不', 'bg': 34.24, 'ed': 34.46},
                            {'w': '仅', 'bg': 34.46, 'ed': 34.6}, {'w': '没', 'bg': 34.6, 'ed': 34.76},
                            {'w': '有', 'bg': 34.76, 'ed': 34.92}, {'w': '放', 'bg': 34.92, 'ed': 35.1},
                            {'w': '弃', 'bg': 35.1, 'ed': 35.4}, {'w': '反', 'bg': 35.4, 'ed': 35.72},
                            {'w': '而', 'bg': 35.72, 'ed': 35.94}, {'w': '是', 'bg': 35.94, 'ed': 36.24},
                            {'w': '买', 'bg': 36.24, 'ed': 36.54}, {'w': '头', 'bg': 36.54, 'ed': 36.78},
                            {'w': '加', 'bg': 36.78, 'ed': 37.04}, {'w': '速', 'bg': 37.04, 'ed': 37.300000000000004},
                            {'w': '研', 'bg': 37.300000000000004, 'ed': 37.58}, {'w': '发', 'bg': 37.58, 'ed': 37.82},
                            {'w': '和', 'bg': 37.82, 'ed': 37.980000000000004},
                            {'w': '武', 'bg': 37.980000000000004, 'ed': 38.12}, {'w': '器', 'bg': 38.12, 'ed': 38.5},
                            {'w': '老', 'bg': 38.5, 'ed': 38.9}, {'w': '美', 'bg': 38.9, 'ed': 39.12},
                            {'w': '气', 'bg': 39.12, 'ed': 39.300000000000004},
                            {'w': '的', 'bg': 39.300000000000004, 'ed': 39.42}, {'w': '是', 'bg': 39.42, 'ed': 39.6},
                            {'w': '多', 'bg': 39.6, 'ed': 39.96}]}
    timelines = parse_timeline(asr_result=ars_result)
    logger.info("timelines {}", timelines)
